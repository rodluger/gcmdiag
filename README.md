# gcmdiag

A Python package for analyzing and processing NetCDF files generated by the exoFMS GCM.

## Quick start

To merge multiple NetCDF files that were generated during a parallel run:

```python
import gcmdiag as gcm
gcm.NetCDFCombine(path = 'path/to/files/', outfile = 'path/to/output.nc')
```

To convert a NetCDF file from sigma coordinates to pressure coordinates and interpolate all arrays:

```python
import gcmdiag as gcm
gcm.Rectify(path = 'path/to/file.nc', interpolation = 'linear')
```

To compare the total angular momentum and Hadley circulation across two runs:

```python
import gcmdiag as gcm
import matplotlib.pyplot as pl

# Load the two runs
daily_files = ['run1/daily.nc', 'run2/daily.nc']
avg_files = ['run1/average.nc', 'run2/average.nc']
data = [gcm.NetCDF(df, af) for df, af in zip(daily_files, average_files)]

# Plot colormaps of total angular momentum on a latitude-pressure
# grid and overlay the mass streamfunction contours
x = [d.lat for d in data]
y = [d.pfull for d in data]
z = [d.totalangmom for d in data]
c = [d.streamfunc for d in data]
titles = ['1 bar', '0.5 bar']
fig, ax = gcm.Compare(x, y, z, titles = titles, c = c, invert_y = True)

pl.show()
```
